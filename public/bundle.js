(()=>{var S=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var ie=Object.getOwnPropertyNames;var ue=Object.prototype.hasOwnProperty;var u=(e,n)=>()=>(e&&(n=e(e=0)),n);var m=(e,n)=>{for(var o in n)S(e,o,{get:n[o],enumerable:!0})},le=(e,n,o,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of ie(n))!ue.call(e,t)&&t!==o&&S(e,t,{get:()=>n[t],enumerable:!(i=te(n,t))||i.enumerable});return e};var r=e=>le(S({},"__esModule",{value:!0}),e);var Q=(e,n,o)=>new Promise((i,t)=>{var l=s=>{try{L(o.next(s))}catch(h){t(h)}},x=s=>{try{L(o.throw(s))}catch(h){t(h)}},L=s=>s.done?i(s.value):Promise.resolve(s.value).then(l,x);L((o=o.apply(e,n)).next())});var G={};m(G,{screenChangeEvent:()=>d});var d,q=u(()=>{d=new Event("screenChange")});function P(e,n){let o,i=n!=null?n:450,t=0,l=15;o=setInterval(()=>{t+=l,e.style.opacity=".8",se(e),t>=i&&(ae(e),clearInterval(o))},l)}function se(e){e.classList.toggle("background-image-none")}function ae(e){e.classList.remove("background-image-none"),e.style.opacity="1"}var A=u(()=>{});function E(e){e.values.audios.songs.gameplay.loop=!0,e.values.audios.songs.gameplay.volume=.5,e.values.audios.songs.gameplay.play()}function C(e){for(let n of Object.values(e.values.audios.effects))n.pause(),n.currentTime=0;for(let n of Object.values(e.values.audios.songs))n.pause(),n.currentTime=0}function W(e){for(let n of Object.values(e.values.audios.effects))n.pause();for(let n of Object.values(e.values.audios.songs))n.pause()}var T=u(()=>{});function O(e){e.view.timeLeft.innerText=e.values.defaults.initialTime,clearInterval(e.values.mainTimer),e.values.mainTimer=setInterval(()=>H(e),1e3)}function V(e){e.view.timeLeft.innerText=0,clearInterval(e.values.mainTimer)}function re(e){e.view.timeLeft.innerText==0&&w(e)}function H(e){let n=parseInt(e.view.timeLeft.innerText);e.view.timeLeft.innerText=n-1,re(e)}function j(e){clearInterval(e.values.mainTimer)}function $(e){e.values.mainTimer=setInterval(()=>H(e),1e3)}function z(e,n){let o=parseInt(e.view.timeLeft.innerText);e.view.timeLeft.innerText=o+n}var f=u(()=>{p()});function _(e){e.view.squares.forEach(i=>{i.classList.remove("enemy")});let n=Math.floor(Math.random()*9),o=e.view.squares[n];e.values.enemySquareId=o.id,o.classList.add("enemy"),e.view.enemy=document.querySelector(".enemy")}function v(e){de(e),clearInterval(e.values.hitBoxTimer),_(e),e.values.hitBoxTimer=setInterval(()=>_(e),e.values.speed)}function R(e,n){if(e.values.control.isLockedPanel)e.values.audios.effects.deny.volume=.2,e.values.audios.effects.deny.play();else{console.log(e.values.control.isLockedPanel),z(e,3);let i=parseInt(e.view.score.innerText)+10;e.view.score.innerText=i,P(document.getElementById(`${n}`)),ce(e,400),e.values.audios.effects.gettingHit.currentTime=0,e.values.audios.effects.gettingHit.play(),e.values.audios.effects.coin.play(),e.values.hits+=1;let t=e.values.defaults.initialSpeed-Math.floor(e.values.hits/2)*60;t>0&&(e.values.speed=t)}}function ce(e,n){clearInterval(e.values.hitBoxTimer),me(e),setTimeout(()=>v(e),n)}function D(e){if(e.values.control.isLockedPanel)e.values.audios.effects.deny.volume=.2,e.values.audios.effects.deny.play();else{let o=e.view.lifes.innerText.substring(1)-1;e.view.lifes.innerText=`x${o}`,o==0?w(e):(e.values.audios.effects.failure.currentTime=0,e.values.audios.effects.failure.play())}}function w(e){return Q(this,null,function*(){clearInterval(e.values.hitBoxTimer),N(e),C(e),e.values.audios.effects.gameOver.play(),c("home"),V(e)})}function me(e){e.values.control.isLockedPanel=!0}function de(e){e.values.control.isLockedPanel=!1}var p=u(()=>{g();A();y();T();f()});function fe(e){e.view.squares.forEach(n=>{n.onmousedown=pe.bind(null,e)})}function pe(e,n){e.values.audios.effects.punch.play(),n.target.id==e.values.enemySquareId?R(e,n.target.id):D(e)}function ve(e){let n=document.querySelector(".pause-button"),o=document.querySelector(".to-quit-button");n.onclick=ye.bind(null,e),o.onclick=B.bind(null,e)}function ye(e){B(e),ge(e)}function ge(e){let n=document.querySelector(".pause-to-quit-button");n.onclick=xe.bind(null,e)}function xe(e){let n=document.querySelector(".quit-confirm-button");n.onclick=U.bind(null,e)}function Le(e){document.querySelectorAll(".return-button").forEach(n=>n.onclick=K.bind(null,e))}function he(e){ve(e),Le(e)}function F(e){b(e),he(e),fe(e),O(e)}var J=u(()=>{y();p();f()});function X(e){F(e),E(e),v(e)}function B(e){W(e),j(e),clearInterval(e.values.hitBoxTimer),e.values.hitBoxTimer=null}function K(e){E(e),$(e),v(e)}function U(e){Se(e)}function N(e){qe(e)}function Se(e){b(e)}function b(e){e.view.lifes.innerText=`x${e.values.defaults.initialLifesQuantity}`,e.view.score.innerHTML=0,e.view.timeLeft.innerText=0,e.values.hits=0,e.values.speed=e.values.defaults.initialSpeed,clearInterval(e.values.hitBoxTimer),clearInterval(e.values.mainTimer)}function qe(e){e.view.lifes.innerText=`x${e.values.defaults.initialLifesQuantity}`,e.view.timeLeft.innerText=0,e.values.hits=0,e.values.speed=e.values.defaults.initialSpeed,clearInterval(e.values.hitBoxTimer),clearInterval(e.values.mainTimer)}var y=u(()=>{p();J();T();f()});function Y(){let e={view:{squares:document.querySelectorAll(".square"),enemy:document.querySelector(".enemy"),timeLeft:document.querySelector("#time"),score:document.querySelector("#score"),lifes:document.querySelector("#lifes")},values:{defaults:{initialLifesQuantity:5,initialSpeed:800,initialTime:30},audios:{effects:{punch:new Audio("./sounds/punch.wav"),gettingHit:new Audio("./sounds/getting_hit.wav"),coin:new Audio("./sounds/coin.wav"),failure:new Audio("./sounds/mocking_failure.wav"),gameOver:new Audio("./sounds/game_over.wav"),deny:new Audio("./sounds/deny.flac")},songs:{gameplay:new Audio("./sounds/gameplay.wav")}},control:{isLockedPanel:!1},hitBoxTimer:null,mainTimer:null,speed:800,enemySquareId:null,hits:0}};X(e)}var Z=u(()=>{y()});var ee={};m(ee,{changePage:()=>c,setViewManager:()=>M});function Ee(){c("gameplay"),Y(),document.dispatchEvent(d)}function Te(){c("home"),document.dispatchEvent(d)}var c,M,g=u(()=>{Z();q();c=e=>{let n=document.querySelector("main"),o=document.querySelector(".panel"),i=document.querySelector(".buttons"),t=document.querySelector(".intro");e=="home"&&(n.classList.remove("gameplay"),n.classList.add("home"),t.classList.remove("display-none"),o.classList.add("display-none"),i.classList.add("display-none")),e=="gameplay"&&(n.classList.remove("home"),n.classList.add("gameplay"),t.classList.add("display-none"),o.classList.remove("display-none"),i.classList.remove("display-none"))};M=()=>{let e=document.querySelector(".play-game"),n=document.querySelectorAll(".quit-game");e.addEventListener("click",Ee),n.forEach(o=>o.addEventListener("click",Te))}});var k={};m(k,{setModalManager:()=>Ie});function we(){var n;(n=a().pauseModalEl)==null||n.classList.toggle("invisible")}function Be(){var n,o,i,t;let e=a();(n=e.pauseModalEl)!=null&&n.classList.contains("invisible")||(o=e.pauseModalEl)==null||o.classList.add("invisible"),(i=e.quitModalEl)!=null&&i.classList.contains("invisible")||(t=e.quitModalEl)==null||t.classList.add("invisible")}function be(){var n;(n=a().quitModalEl)==null||n.classList.toggle("invisible")}function Me(){var n;(n=a().quitModalEl)==null||n.classList.toggle("invisible")}function ke(){var n,o;let e=a();(n=e.pauseModalEl)==null||n.classList.toggle("invisible"),(o=e.quitModalEl)==null||o.classList.toggle("invisible")}var a,Ie,I=u(()=>{a=()=>({pauseButtonEl:document.querySelector(".pause-button"),toQuitButtonEl:document.querySelector(".to-quit-button"),quitButtonEl:document.querySelector(".quit-game"),continueButtonEls:document.querySelectorAll(".return-button"),pauseToQuitButton:document.querySelector(".pause-to-quit-button"),pauseModalEl:document.querySelector(".pause-modal"),quitModalEl:document.querySelector(".quit-modal")});Ie=()=>{var n,o,i,t,l;let e=a();(n=e.pauseButtonEl)==null||n.addEventListener("click",we),(o=e.continueButtonEls)==null||o.forEach(x=>{x.addEventListener("click",Be)}),(i=e.toQuitButtonEl)==null||i.addEventListener("click",be),(t=e.quitButtonEl)==null||t.addEventListener("click",Me),(l=e.pauseToQuitButton)==null||l.addEventListener("click",ke)}});var ne={};m(ne,{setScreenChangeListener:()=>Pe});function Ge(){M(),Qe()}var Qe,Pe,oe=u(()=>{g();({setModalManager:Qe}=(I(),r(k)));Pe=()=>{document.addEventListener("screenChange",Ge)}});var{screenChangeEvent:cn}=(q(),r(G)),{setScreenChangeListener:Ae}=(oe(),r(ne)),{setModalManager:Ce}=(I(),r(k)),{setViewManager:We}=(g(),r(ee));We();Ce();Ae();})();
//# sourceMappingURL=bundle.js.map
