(()=>{var a=(t,n,i)=>new Promise((l,o)=>{var w=s=>{try{r(i.next(s))}catch(d){o(d)}},h=s=>{try{r(i.throw(s))}catch(d){o(d)}},r=s=>s.done?l(s.value):Promise.resolve(s.value).then(w,h);r((i=i.apply(t,n)).next())});var m=t=>{let n=document.querySelector("main"),i=document.querySelector(".panel"),l=document.querySelector(".buttons"),o=document.querySelector(".intro");t=="home"&&(n.classList.remove("gameplay"),n.classList.add("home"),o.classList.remove("display-none"),i.classList.add("display-none"),l.classList.add("display-none")),t=="gameplay"&&(n.classList.remove("home"),n.classList.add("gameplay"),o.classList.add("display-none"),i.classList.remove("display-none"),l.classList.remove("display-none"))},E=()=>{let t=document.querySelector(".play-game"),n=document.querySelectorAll(".quit-game");t.addEventListener("click",()=>{m("gameplay")}),n.forEach(i=>i.addEventListener("click",()=>{m("home")}))};E();var B=document.querySelector(".pause-button"),b=document.querySelector(".to-quit-button"),p=document.querySelector(".quit-game"),x=document.querySelectorAll(".return-button"),I=document.querySelector(".pause-to-quit-button"),c=document.querySelector(".pause-modal"),u=document.querySelector(".quit-modal");B.addEventListener("click",()=>{c.classList.toggle("invisible")});x.forEach(t=>{t.addEventListener("click",()=>{c.classList.contains("invisible")||c.classList.add("invisible"),u.classList.contains("invisible")||u.classList.add("invisible")})});b.addEventListener("click",()=>{u.classList.toggle("invisible")});p.addEventListener("click",()=>{f(),u.classList.toggle("invisible")});I.addEventListener("click",()=>{c.classList.toggle("invisible"),u.classList.toggle("invisible")});var e={view:{squares:document.querySelectorAll(".square"),enemy:document.querySelector(".enemy"),timeLeft:document.querySelector("#time"),score:document.querySelector("#score"),lifes:document.querySelector("#lifes")},values:{defaults:{initialLifesQuantity:5,initialSpeed:900,initialTime:30},audios:{effects:{punch:new Audio("../sounds/punch.wav"),gettingHit:new Audio("../sounds/getting_hit.wav"),coin:new Audio("../sounds/coin.wav"),failure:new Audio("../sounds/mocking_failure.wav"),gameOver:new Audio("../sounds/game_over.wav")},songs:{gameplay:new Audio("../sounds/gameplay.wav")}},hitBoxTimer:null,mainTimer:null,speed:900,enemySquareId:null,hits:0}};function y(){e.view.squares.forEach(i=>{i.classList.remove("enemy")});let t=Math.floor(Math.random()*9),n=e.view.squares[t];e.values.enemySquareId=n.id,n.classList.add("enemy"),e.view.enemy=document.querySelector(".enemy")}function v(){clearInterval(e.values.hitBoxTimer),y(),e.values.hitBoxTimer=setInterval(y,e.values.speed)}function Q(){return a(this,null,function*(){e.view.squares.forEach(t=>a(this,null,function*(){t.addEventListener("mousedown",k)}))})}function k(t){return a(this,null,function*(){yield e.values.audios.effects.punch.play(),t.target.id==e.values.enemySquareId?A():yield G()})}function g(t){clearInterval(e.values.hitBoxTimer),setTimeout(v,t)}function A(){K(3);let n=parseInt(e.view.score.innerText)+10;e.view.score.innerText=n,g(900),e.values.audios.effects.gettingHit.play(),e.values.audios.effects.coin.play(),e.values.hits+=1;let i=e.values.defaults.initialSpeed-Math.floor(e.values.hits/2)*60;i>0&&(e.values.speed=i)}function G(){return a(this,null,function*(){let n=e.view.lifes.innerText.substring(1)-1;e.view.lifes.innerText=`x${n}`,n==0?T():(yield e.values.audios.effects.failure.play(),g(1e3))})}function M(){C(),q(),v()}function L(){Z(),U(),clearInterval(e.values.hitBoxTimer),e.values.hitBoxTimer=null}function O(){q(),X(),v()}function W(){}function P(){V(),z()}function j(){e.view.lifes.innerText=`x${e.values.defaults.initialLifesQuantity}`,e.view.score.innerHTML=0,e.values.hits=0,e.values.speed=e.values.defaults.initialSpeed,clearInterval(e.values.hitBoxTimer)}function H(){e.view.lifes.innerText=`x${e.values.defaults.initialLifesQuantity}`,e.values.hits=0,e.values.speed=e.values.defaults.initialSpeed,clearInterval(e.values.hitBoxTimer)}function C(){P(),Q(),j(),N()}function V(){let t=document.querySelector(".pause-button"),n=document.querySelector(".to-quit-button");t.addEventListener("click",_),n.addEventListener("click",L)}function _(){L(),$()}function $(){document.querySelector(".pause-to-quit-button").addEventListener("click",R)}function R(){document.querySelector(".quit-confirm-button").addEventListener("click",W)}function z(){document.querySelectorAll(".return-button").forEach(t=>t.addEventListener("click",O))}var D=document.querySelector(".play-game");D.addEventListener("click",()=>{M()});function N(){e.view.timeLeft.innerText=e.values.defaults.initialTime,clearInterval(e.values.mainTimer),e.values.mainTimer=setInterval(S,1e3)}function F(){e.view.timeLeft.innerText=0,clearInterval(e.values.mainTimer)}function J(){e.view.timeLeft.innerText==0&&T()}function S(){let t=parseInt(e.view.timeLeft.innerText);console.log(e.view.timeLeft.innerText),e.view.timeLeft.innerText=t-1,J()}function K(t){let n=parseInt(e.view.timeLeft.innerText);e.view.timeLeft.innerText=n+t}function U(){clearInterval(e.values.mainTimer)}function X(){e.values.mainTimer=setInterval(S,1e3)}function q(){e.values.audios.songs.gameplay.loop=!0,e.values.audios.songs.gameplay.volume=.5,e.values.audios.songs.gameplay.play()}function Y(){for(let t of Object.values(e.values.audios.effects))t.pause(),t.currentTime=0;for(let t of Object.values(e.values.audios.songs))t.pause(),t.currentTime=0}function Z(){for(let t of Object.values(e.values.audios.effects))t.pause();for(let t of Object.values(e.values.audios.songs))t.pause()}function T(){return a(this,null,function*(){f(),Y(),e.values.audios.effects.gameOver.play(),m("home"),F()})}function f(){H()}p.addEventListener("click",()=>{f()});})();
//# sourceMappingURL=bundle.js.map
